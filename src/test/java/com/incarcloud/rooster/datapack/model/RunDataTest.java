package com.incarcloud.rooster.datapack.model;

import java.util.List;

import org.junit.Test;

import com.github.io.protocol.core.ProtocolEngine;
import com.github.io.protocol.utils.HexStringUtil;
import com.incarcloud.rooster.datapack.DataPack;
import com.incarcloud.rooster.datapack.DataPackTarget;
import com.incarcloud.rooster.datapack.strategy.IDataPackStrategy;
import com.incarcloud.rooster.datapack.strategy.impl.RunDataStrategy;

import io.netty.buffer.ByteBuf;
import io.netty.buffer.Unpooled;

public class RunDataTest {
	private IDataPackStrategy strategy = new RunDataStrategy();

	@Test
	public void test() throws Exception {
		String run = "2323020102fe38363232333430323130343234373" + "00001bc100b1c00100201010127104e2000000082138"
				+ "81388138813881388138813881388138813881388138" + "81388138813881388138813881388138813881388138"
				+ "81388138813881388138813881388138813881388138" + "81388138813881388138813881388138813881388138"
				+ "81388138813881388138813881388138813881388138" + "81388138813881388138813881388138813881388138"
				+ "81388138813881388138813881388138813881388138" + "81388138813881388138813881388138813881388138"
				+ "81388138813881388138813881388138813881388138" + "81388138813881388138813881388138813881388138"
				+ "81388138813881388138813881388138813881388138" + "81388138813881388138813881388138802010100280"
				+ "05000500050005000500050005000500050005000500" + "05000500050005000500050005000500050005000500"
				+ "05000500050005000500050005000500050005000500" + "05000500050005000500050005003010101025800005"
				+ "ba003e8012c50010eea60c80014dcdcdcdc010101010" + "101010101190a00012c01060107d0000807010000000"
				+ "0000000000000000000000000080103138801041388010250010350090010";
		ProtocolEngine engine = new ProtocolEngine();
		RunData runData = engine.decode(HexStringUtil.parseBytes(run), RunData.class);

//		String bytes = "2323020102FE38363232333430323130343234373"
//				+ "00001A112010410063001010127104E200001000082138"
//				+ "8138813881388138813881388138813881388138813881"
//				+ "3881388138813881388138813881388138813881388138"
//				+ "8138813881388138813881388138813881388138813881"
//				+ "3881388138813881388138813881388138813881388138"
//				+ "8138813881388138813881388138813881388138813881"
//				+ "3881388138813881388138813881388138813881388138"
//				+ "8138813881388138813881388138813881388138813881"
//				+ "3881388138813881388138813881388138813881388138"
//				+ "8138813881388138813881388138813881388138813881"
//				+ "3881388138813881388138813881388138813881388138"
//				+ "8138813881388138813881388138813881388138813881"
//				+ "3881388138802010100285050505050505050505050505"
//				+ "0505050505050505050505050505050505050505050505"
//				+ "05050505003010101025800005BA003E8012C50010EEA6"
//				+ "0C80014DCDCDCDC010101010101010101010A19012C010"
//				+ "000040101025003E800645A00C8001E070100000000000"
//				+ "0000000000000000000100000000008010313880104138"
//				+ "8010250010350A5";
		
		
		String bytes = "2323020102FE383632323334303231303432343730000199120104111C1801010127104E20000100008213881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813881388138813880201010020505050505050505050505050505050505050505050505050505050505050505003010101025800005BA003E8012C50010EEA60C80014DCDCDCDC010101010101010101010A19012C010000040101025003E800645A00C8001E07010000000000000000000000000000000000000000080103138801041388010250010350AE";
		
		
		
		
		DataPack dataPack = new DataPack("test", "test", "test");

		ByteBuf buf = Unpooled.buffer();
		buf.writeBytes(HexStringUtil.parseBytes(bytes));
		dataPack.setBuf(buf);
		List<DataPackTarget> list = strategy.decode(dataPack);

		System.out.println(engine.toPrettyHexString(runData));
	}

}
